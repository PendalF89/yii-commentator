!function(t){function e(e){var a;return e&&e.constructor==Array&&3==e.length?e:(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))?[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]:(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))?[2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3])]:(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))?[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]:(a=/rgba\(0, 0, 0, 0\)/.exec(e))?n.transparent:n[t.trim(e).toLowerCase()]}function a(a,n){var o;do{if(o=t.css(a,n),""!=o&&"transparent"!=o||t.nodeName(a,"body"))break;n="backgroundColor"}while(a=a.parentNode);return e(o)}t.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(n,o){t.fx.step[o]=function(t){t.colorInit||(t.start=a(t.elem,o),t.end=e(t.end),t.colorInit=!0),t.elem.style[o]="rgb("+[Math.max(Math.min(parseInt(t.pos*(t.end[0]-t.start[0])+t.start[0]),255),0),Math.max(Math.min(parseInt(t.pos*(t.end[1]-t.start[1])+t.start[1]),255),0),Math.max(Math.min(parseInt(t.pos*(t.end[2]-t.start[2])+t.start[2]),255),0)].join(",")+")"}});var n={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]}}(jQuery),$(document).ready(function(){function t(t,e){var a=$('.comment[data-id="'+t+'"]').css("backgroundColor");$('.comment[data-id="'+t+'"]').animate({backgroundColor:e},500).animate({backgroundColor:a},800)}function e(t,e){var a=t.data("id"),n=t.parents(".comment").find('[data-role="dynamic-form-container"]'),o=t.parents(".comment").find(".btn-group");$.ajax({url:e,type:"post",dataType:"html",data:"id="+a+"&url="+pageUrl,success:function(t){n.html(t),o.hide()}})}function a(e){$.ajax({url:commentsCreateUrl,type:"post",dataType:"json",data:e.serialize(),success:function(a){return e[0].reset(),$('[data-role="tree"]').html(a.tree),a.premoderate?($('[data-role="modal-container"]').html(a.modal),void $('[data-role="launch-modal"]').click()):(o($('[name="comment_'+a.id+'"]'),1e3),t(a.id,r),void $('[data-role="count"]').html(a.count))},beforeSend:function(){$(".comments button").attr("disabled",!0)},complete:function(){$(".comments button").attr("disabled",!1)}})}function n(e){$.ajax({url:commentsUpdateUrl,type:"post",dataType:"json",data:e.serialize(),success:function(e){$('[data-role="tree"]').html(e.tree),o($('[name="comment_'+e.id+'"]'),1e3),t(e.id,i)},beforeSend:function(){$(".comments button").attr("disabled",!0)},complete:function(){$(".comments button").attr("disabled",!1)}})}function o(t,e){$("html, body").animate({scrollTop:t.offset().top},e)}var r="#baefba",i="#ED9C28";$(".comments").on("click",'[href="#comment_reply"]',function(){e($(this),commentsReplyFormUrl)}),$(".comments").on("click",'[href="#comment_edit"]',function(){e($(this),commentsUpdateFormUrl)}),$(".comments").on("click",'[data-role="cancel"]',function(t){t.preventDefault(),$(this).parents(".comment").find(".btn-group").show(),$(this).parents(".comment").find('[data-role="dynamic-form-container"]').empty()}),$(".comments").on("submit","form",function(t){t.preventDefault(),$(this).find("[data-is-new]").data("is-new")?a($(this)):n($(this))}),$(".comments").on("click",'[href="#comment_delete"]',function(t){t.preventDefault(),$.ajax({url:commentsDeleteUrl,type:"post",dataType:"json",data:"id="+$(this).data("id"),success:function(t){$('[data-role="tree"]').html(t.tree),$('[data-role="count"]').html(t.count),$('[data-role="modal-container"]').html(t.modal),$('[data-role="launch-modal"]').click()},beforeSend:function(){$(".comments button").attr("disabled",!0)},complete:function(){$(".comments button").attr("disabled",!1)}})}),$(".comments").on("click",'[href="#comment_like"]',function(t){t.preventDefault();var e=$(this).parents(".comment").find('[data-role="likes"]'),a=$(this).data("like"),n=$(this).parents(".comment").data("id");$.ajax({url:commentsLikesUrl,type:"post",dataType:"json",data:"id="+n+"&like="+a,success:function(t){t&&e.text(t.likes)}})})});